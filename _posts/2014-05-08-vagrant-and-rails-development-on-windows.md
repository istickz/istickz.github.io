---
title: Rails on Vagrant или 6 простых шагов чтобы начать разработку на Rails в Windows
permalink: /ru/vagrant-and-rails-development-on-windows/
categories: [Ruby]
tags: [ruby]
---
Вопреки всем доводам о том, что разработка Rails приложения в Windows не очень комфортная, решил написать этот пост, который поможет новичкам быстро прийти в мир Rails не травмируя свою психику изучением linux, настройкой окружения под него и рядом других задач, отнимающих много времени и сил.  
<!--more-->

  
Итак, если у вас Windows машина и дикое желание попробовать Rails прямо сейчас, то я покажу всего 6 шагов, совершив которые вы будете лицезреть свое первое приложение по адресу <http://localhost:3000/>.

* * *

### Шаг 1-й {#1}

#### Установка Virtualbox {#virtualbox}

Virtualbox пригодится нам для запуска виртуальной машины с Ruby on Rails окружением для разработки.

Установка:  
Переходим по адресу:  
<https://www.virtualbox.org/wiki/Downloads>  
Выбираем  
&#171;VirtualBox 5.0 for Windows hosts x86/amd64&#187;  
Скачиваем, устанавливаем.

* * *

### Шаг 2-й {#2}

#### Установка Vagrant {#vagrant}

Vagrant &#8212; это очень крутая штука, серьезно упрощающая работу с виртуальными машинами. Подробнее о нем вы можете на офф сайте: [www.vagrantup.com/][1]

Возможности vagrant, которые мы будем использовать сегодня &#8212; создание и настройка виртуальной машины, автоматический проброс портов и создание общих папок.

Установка:  
Переходим по адресу:  
<http://www.vagrantup.com/downloads>  
Выбираем: &#171;WINDOWS Universal (32 and 64-bit)&#187;  
Скачиваем, устанавливаем.

* * *

### Шаг 3-й {#3}

#### Скачивание настроенного под Rails vagrant-box&#8217;а {#railsvagrantbox}

В сообществе Vagrant все время появляются новые сборки конфигураций виртуальных машин. Да вы и сами можете сделать свою сборку. Я же предлагаю использовать вот эту сборку: <https://vagrantcloud.com/leopard/rwprecise64>

Далее, создаем папку rails-box и инициализируем нашу виртуальную машину.  
Для этого нужно открыть командную строку[^1] и, находясь в папке rails-box, выполнить следующие команды:

Инициализация виртуальной машины:

```
 vagrant init leopard/rwprecise64
```

После запуска этой команды создастся конфигурационный файл Vagrantfile в корне нашей папки. Он нам пригодится в дальнейшем.

Запуск виртуальной машины:

```
 vagrant up
```

Эта команда проверяет наличие установленных виртуальных машин в Virtualbox и, при их отсутствии скачивает, устанавливает и настраивает новую виртуальную машину согласно Vagrantfile. После чего виртуальная машина запускается и работает до перезапуска вашего компьютера.

* * *

### Шаг 4-й {#4}

#### SSH доступ к машине {#ssh}

Для доступа и работы с виртуальной машиной я рекомендую клиент [PuTTY][2]  
В особой настройке эта программа не нуждается, нужно лишь указать IP адрес(127.0.0.1), порт(2222) и нажать Open.  
Перед вами откроется консоль. Логин и пароль которые нужно будет ввести: vagrant, vagrant.  
На свое усмотрение вы можете настроить авторизацию по ssh ключу, тогда пароль и и логины вводить не придется.

* * *

### Шаг 5-й {#5}

#### Общие папки.

Предпоследний шаг, который нам осталось сделать &#8212; создать папку в которой мы будем хранить проекты и синхронизировать ее с виртуальной машиной, другими словами &#8212; просто сделать общую папку.

Открываем конфигурационный файл Vagrantfile и добавляем туда строку:

```
config.vm.synced_folder "../projects/", "/home/vagrant/projects"
```

`config.vm.synced_folder\` &#8212; принимает 2 параметра: локальную папку и папку на виртуальной машине, которые нужно связать. Путь к локальной папке относительный, то есть папка projects находится на один уровень выше чем rails-box. После сохранения файла перезапустим виртуальную машину:

```
 vagrant reload
```

Заново запускаем PuTTY и проверяем, работает ли все это:

```
$ ls
postinstall.sh  projects
```

Отлично! Перейдем в папку projects и создадим там пустой файл:

```
$ cd projects/
$ touch sample.txt
$ ls
sample.txt
```

Теперь смотрим наличие sample.txt в папке с проектами в Windows. Если файл присутствует, то 5-й шаг мы сделали правильно! У нас остался последний шаг, сделав который, мы уже сможем лицезреть rails приложение у себя в браузере.

* * *

### Шаг 6-й {#6}

#### Установка Rails и создание первого приложения {#rails}

Находясь в PuTTY устанавливаем rails:

```
$ gem install rails
```

Далее переходим в папку projects, создаем новое приложение и запускаем сервер:

```
$ cd projects
$ rails new sampleapp
$ cd sampleapp
$ rails s
```

После чего в адресной строке любимого браузера набираем <http://localhost:3000/> [^2] и видим приветственную страницу пустого Rails приложения.

Если вы видите такую страницу, то поздравляю вас &#8212; вы совершили 5 нелегких шагов, чтобы приблизить себя к разработке на замечательном фреймворке Ruby on Rails. Теперь вам остается открыть папку с проектом в любимом редакторе и начать разработку вашего приложения.

[^1]:  
В контекстное меню проводника Windows можно добавить опцию &#171;Открыть окно команд&#187;. Более подробно можно почитать [тут][3]

[^2]:  
Чтобы пробросить порт 3000 из виртуальной машины нужно добавить строку: `config.vm.network :forwarded_port, guest: 3000, host: 3000` в Vagrantfile и перезапустить виртуальную машину.

 [1]: http://www.vagrantup.com/
 [2]: http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html
 [3]: http://www.askvg.com/enable-open-command-window-here-option-in-context-menu-in-windows-vista/